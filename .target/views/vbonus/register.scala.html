@(message: String)(configInfo: HashMap[String, String])(userInfo: HashMap[String,String])(inputList: Map[String, Html])

@import helper._

<link rel="stylesheet" href="@routes.Assets.at("javascripts/alertify/themes/alertify.core.css")" />
      <link rel="stylesheet" href="@routes.Assets.at("javascripts/alertify/themes/alertify.default.css")" id="toggleCSS" />
<script src="@routes.Assets.at("javascripts/alertify/lib/alertify.min.js")"></script>	
<script type="text/javascript" src="@controllers.routes.Vbonus.javascriptRoutes()"></script>


<script type='text/javascript'>
    jQuery.noConflict();
    jQuery(document).ready(function() {
        if ('{flag_register}' == '1')
        {
            jQuery('#register').remove();
        }
        //jQuery('.LeftSide').html('{left_menu}');
        if ($('#is_server').val() == 1) {
            $('#invite').hide();
        } else {
            $('#invite').show();
        }
    });
</script>
<script type="text/javascript">
    function CallAjax() {
        jsVbonusRoutes.controllers.Vbonus.ajaxVbonusTest("congtt").ajax({
            success: function(data) {
                alertify.success(data);               
            },
            error: function() {
                alertify.error("error!");
            }
        })
    }

    function CheckRegister() {
        var server_id = "";
        var character = "";

        var vbonus_code = $('#txtVbonusCode').val();
        if (vbonus_code == '') {
            alertify.error("Vui lÃƒÂ²ng nhÃ¡ÂºÂ­p mÃƒÂ£ sÃ¡Â»â€˜ vbonus.");
            $('#txtVbonusCode').focus();
            return;
        }
        var captcha_code = $('#txtCaptchaCode').val();
        if (captcha_code == '') {
            alertify.error("Vui lÃƒÂ²ng nhÃ¡ÂºÂ­p mÃƒÂ£ sÃ¡Â»â€˜ bÃ¡ÂºÂ£o mÃ¡ÂºÂ­t.");
            $('#txtCaptchaCode').focus();
            return;
        }
        var token = $("#token").val();
        if ($('#is_server').val() == 1) {
            server_id = $("#server option:selected").val();
            character = $("#character option:selected").val();
            if (server_id == "")
            {
                alertify.error("Vui lÃƒÂ²ng chÃ¡Â»ï¿½n server.");
                $('#server').focus();
                return;
            }
            if (character == "")
            {
                alertify.error("Vui lÃƒÂ²ng chÃ¡Â»ï¿½n nhÃƒÂ¢n vÃ¡ÂºÂ­t.");
                $('#character').focus();
                return;
            }
            /* $.ajax({
             type: "POST",
             url: "invite.ajaxinvite.html",
             data: "sugar_body_only=true&tp=ajaxinvite&vbonus_code=" + vbonus_code + "&captcha_code=" + captcha_code + "&server_id=" + server_id + "&character=" + character + "&token=" + token,
             success: function(msg) {
             Message(msg);
             }
             });*/
        } /*else {
         $.ajax({
         type: "POST",
         url: "invite.ajaxinvite.html",
         data: "sugar_body_only=true&tp=ajaxinvite&vbonus_code=" + vbonus_code + "&captcha_code=" + captcha_code,
         success: function(msg) {
         Message(msg);
         }
         });
         }*/
       jsVbonusRoutes.controllers.Vbonus.ajaxVbonusRegister(vbonus_code, captcha_code, server_id, character, token).ajax({
            success: function(data) {
                alert(data);
                alertify.success(data);                
            },
            error: function() {
                alert("Error!")
            }
        })

    }

    function getCharacter(){
    	var serverId = $('#server option:selected').val();
    	var serverName = $('#server option:selected').text();
    	var token = $('#token').val();
    	var character = $('#character');
    	var _x_options = character.attr('options'); 
		_x_options.length =1;		
    	if(serverId!="" && serverName !=""){
    	  jsVbonusRoutes.controllers.Vbonus.ajaxVbonusGetCharacter(serverId,serverName,token).ajax({
              success: function(data) {
            	  var js_obj = eval('(' + data + ')');
					if(js_obj.length>0)	
					{		
						for (i=0;i<js_obj.length;i++){
							var tmp=' level="'+js_obj[i].level+'" characterName="'+js_obj[i].name+'"  firstLogin="'+js_obj[i].firstLogin+'"  token="'+js_obj[i].token+'" ';
							character.append($('<option  '+tmp+'></option>').val(js_obj[i].id).html(js_obj[i].name))							
						}
						alertify.success("Vui lòng chọn nhân vật.");	
					}			        
              },
              error: function() {
            	  alertify.error("Không có nhân vật.");
              }
          })
    	}
    }
    
	function showInfoCharacter(){		
		SetDefault();
		

		$('#txtLevel').html('');
		var character= $( "#character option:selected" ).val();
		if(character == "")
		{
		  alertify.error("Vui lòng chọn nhân vật.");
		  $( "#character").focus();
		  $('#invite').hide();
		  return;
		}
		var arr_character = character.split("@*@");
		var is_register = arr_character[0];	
		var level = arr_character[1];		
		$('#txtLevel').html(level);
		if(is_register==1){		
			alertify.success("Bạn có thể sử dụng nhân vật này.");			
			$('#invite').show();
		}else{
			alertify.error("Level không hợp lệ.");
		}
		
		
	}
	
	function SetDefault(){			
		$('#invite').hide();
		$('#info_gamer').fadeOut();
		$('#token').val('');
		$('#message_check').html('');
		$('#check_zing_id').show();
	}

</script>
<style type="text/css">
    .bolder
    {
        font-weight:bolder;
    }
    .red
    {
        font-weight:bolder;
        color:red;
    }
    .tip
    {
        font-style:italic;
    }

    #message_success{
        color: #FF0000;
        align:center;
        font-size: 15pt;
        font-weight: bold;
    }

</style>

 
 <form name="form1" id="form1" action="@routes.Vbonus.add" method="post">
    <input type="hidden" name="hdfInsert" id="hdfInsert" > 
    <input type="hidden" name="mode" id="mode" value="{mode}"/>
    <input type="hidden" name="page"  id="page"    value="1" />

    <input type="hidden" name="id" id="id" value="" />
    <input type="hidden" name="token" id="token" value=""/>
    <input type="hidden" name="type" id="type" value=""/>
    <input type="hidden" name="group_id" id="group_id" value=""/>
    <input type="hidden" name="is_server" id="is_server" value="{is_server}"/>

    <div style="clear:both;"></div>
    <div id="info">
        <a href="javascript:CallAjax();">CALL</a>
        <h2>ThÃ´ng tin chÆ°Æ¡ng trÃ¬nh</h2>
        
	        <!--@if(inputList != null && !inputList.isEmpty()){
				
				@for((key, value) <- inputList) {
					 <h1> @key</h1> to </h2> @value</h2>
					}	
			}-->
		
		
        <table style="margin-left:50px;">
            <tr style="{platform_style}">
                <td class="Strong01" colspan=4>
                   ChÆ°Æ¡ng trÃ¬nh : {_platform} @configInfo.get("name")
                </td>
            </tr>		
            <tr>
                <td class="Strong01">
                    Thá»�i gian diá»…n ra:
                </td>
                <td width="100px">
                    @configInfo.get("fromDate")
                </td>
                <td  class="Strong01">
                   Ä‘áº¿n
                </td>
                <td>
                    @configInfo.get("toDate")
                </td>
            </tr>
            <tr>
                <td  class="Strong01">
                    Thá»�i gian má»�i tÃ i khoáº£n:  
                </td>
                <td>
                    @configInfo.get("inviteFromDate")
                </td>
                <td  class="Strong01">
                  Ä‘áº¿n
                </td>
                <td>
                    @configInfo.get("inviteToDate")
                </td>
            </tr>		
            <tr style="display:auto">
                <td>TÃ i khoáº£n
                </td>
                <td colspan=3>@userInfo.get("username")
                </td>
            </tr>
            <tr style="display:auto">
                <td>NgÃ y táº¡o tÃ i khoáº£n
                </td>
                <td colspan="3">@userInfo.get("registerDate")
                </td>
            </tr>
        </table>
    </div>
    <div style="clear:both;"></div>
    <div id="message">@message</div>
    <div style="clear:both;"></div>
    <div id="register">
        <h2>Ä�Äƒng kÃ½</h2>
        <div id="register_success">
            {register_note}
        </div>
        
                 
        <div id="register_info">
            <table  style="margin-left:50px;">
                <tr style="display:auto" id="trVbonusCode">
                    <td>MÃ£ sá»‘ VBonus <b style="color:red">(*)</b>
                    </td>
                    <td colspan=3><input type="text" placeholder="-- Nháº­p mÃ£ sá»‘ Vbonus --" id="txtVbonusCode" name="txtVbonusCode">
                        &nbsp;<a href="http://win.phongmay.zing.vn/fe/info/cpanel/list_pm.html">TÃ¬m mÃ£ sá»‘ Vbonus táº¡i Ä‘Ã¢y.</a>
                    </td>
                </tr>
                <!-- BEGIN: server -->
                <tr>
                    <td>Server <b style="color:red">(*)</b>
                    </td>
                    <td colspan=3>
                       @inputList.get("server")
                    </td>
                </tr>
                <tr>
                    <td>NhÃ¢n váº­t <b style="color:red">(*)</b>
                    </td>
                    <td colspan=3>
                          @inputList.get("character")
                    </td>
                </tr>
                <tr>
                    <td>Level <b style="color:red"></b>
                    </td>
                    <td colspan=3>
                        <span id="txtLevel">&nbsp;</span>
                    </td>
                </tr>
                <tr>
                    <td colspan="4">&nbsp;</td>
                </tr>
                <!-- END: server -->

                <tr>
                    <td colspan="4">
                        <div style="margin-left:123px;">
                            <img width="205px" height="40px" src="{CaptchaImg}" />
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>MÃ£ báº£o máº­t : 
                    </td>
                    <td>
                        <input type="text" name="txtCaptchaCode" id="txtCaptchaCode" placeholder=" -- Nháº­p mÃ£ báº£o máº­t --" />
                    </td>
                </tr>		
            </table>
            <div style="display:none;margin-left:250px;" id="invite">	
                <a href="javascript:CheckRegister()" style="cursor:pointer"><img src="@routes.Assets.at("images/btn_invite.png")"/></a>

            </div>
        </div>
        <!-- END: register_info -->
    </div>
    <div style="clear:both;"></div>
</form>

