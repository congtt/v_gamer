jQuery.fn.extend({addNavigation:function(){$navigation=function(b){var c=this;this.options={event:arguments[1]&&arguments[1].event?arguments[1].event:0,effect:arguments[1]&&arguments[1].effect?arguments[1].effect:false,activeSection:arguments[1]&&arguments[1].activeSection?arguments[1].activeSection:null,callback:arguments[1]&&arguments[1].callback?arguments[1].callback:null};this.navigation=b;this.navigation.find("li").each(function(){var d=$(this);if(d.find("> ul").length>0){d.addClass("HasChild")}d.bind(c.options.event,function(f){var e=null;d.parent().find("li.Active").each(function(){var h=$(this);if(h.find("li.Active").length<=0){e=h}});try{while(e.parent().parent().hasClass("Active")&&e.html()!=d.parent().parent().parent().find("> li.Active").html()&&e.html()!=d.html()){if(c.options.effect){e.find("> ul:first").hide("normal")}else{e.find("> ul:first").hide()}e.removeClass("Active");e=e.parent().parent()}if(d.parent().find("> li.Active").html()!=d.html()){if(c.options.effect){d.parent().find("> li.Active ul").hide("normal")}else{d.parent().find("> li.Active ul").hide()}d.parent().find("> li.Active").removeClass("Active")}}catch(g){}if(typeof(d.find("> ul:first").css("position"))!="undefined"&&d.find("> ul:first").css("position").match(/absolute|relative/)){this.zindex=1000;d.css({zIndex:c.zindex++});if(d.offset().left+d.find("> ul:first").outerWidth()*2>$(window).width()){d.find("> ul:first").addClass("ToRight")}}if(c.options.event=="click"){if(!d.hasClass("Active")){d.addClass("Active");if(c.options.effect){d.find("> ul:first").show("normal")}else{d.find("> ul:first").show()}}else{d.removeClass("Active");if(c.options.effect){d.find("> ul:first").hide("normal")}else{d.find("> ul:first").hide()}}}else{d.addClass("Active");if(c.options.effect){d.find("> ul:first").show("normal")}else{d.find("> ul:first").show()}}f.stopPropagation()})});$(document).bind(c.options.event,function(d){if(c.navigation.find("li.Active").length>0){c.refresh()}d.stopPropagation()});this.setActive=function(){try{this.activeSection=c.options.activeSection;if(this.activeSection!=null){var f=this.activeSection.replace(/[a-zA-Z]/g,"").toString().split("_")}var e=this.navigation.find("> li");do{e=e.eq(f[0]-1);e.addClass("Hilite");e=e.find("ul:first > li");f.splice(0,1)}while(f.length>0)}catch(d){}};this.refresh=function(){c.zindex=1000;var d=null;this.navigation.find("li.Active").each(function(){var e=$(this);if(e.find("li.Active").length<=0){d=e}});do{if(c.options.effect){d.find("> ul:first").hide("normal")}else{d.find("> ul:first").hide()}d.removeClass("Active");d=d.parent().parent()}while(d.parent().parent().hasClass("Active"));if(c.options.effect){this.navigation.find("> li.Active > ul").hide("normal")}else{this.navigation.find("> li.Active > ul").hide()}this.navigation.find("> li.Active").removeClass("Active")};this.setActive();if(this.options.callback!=null){this.options.callback()}};var a=arguments[0];this.each(function(){new $navigation($(this),a)})}}); 